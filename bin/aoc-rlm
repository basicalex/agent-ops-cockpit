#!/usr/bin/env bash
set -euo pipefail

DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" >/dev/null 2>&1 && pwd)"

if [[ -x "$DIR/aoc-cli" ]]; then
  exec "$DIR/aoc-cli" rlm "$@"
fi

if [[ -x "$DIR/../crates/target/release/aoc-cli" ]]; then
  exec "$DIR/../crates/target/release/aoc-cli" rlm "$@"
fi

if [[ -x "$DIR/../crates/target/debug/aoc-cli" ]]; then
  exec "$DIR/../crates/target/debug/aoc-cli" rlm "$@"
fi

if command -v aoc-cli >/dev/null 2>&1; then
  exec aoc-cli rlm "$@"
fi

echo "aoc-rlm: Rust CLI not found. Build with: cargo build --release -p aoc-cli" >&2
exit 1
