#!/usr/bin/env bash
set -euo pipefail

agent_id="gemini"
agent_bin="${AOC_GEMINI_BIN:-gemini}"
agent_label="Gemini"

if [[ "${AOC_AGENT_RUN:-0}" == "1" ]]; then
  export AOC_NO_TMUX=1
  exec aoc-agent-wrap "$agent_id" "$agent_bin" "$agent_label" "$@"
fi

if [[ -n "${ZELLIJ:-}" || -n "${ZELLIJ_SESSION_NAME:-}" ]]; then
  AOC_AGENT_ID="$agent_id" aoc-new-tab --aoc --name "$agent_label" "$@"
else
  AOC_AGENT_ID="$agent_id" aoc-launch
fi
