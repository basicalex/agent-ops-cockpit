- [2026-02-23 15:34] [2026-02-23 13:00] Planned Task 108 subtasks for semantic OM: adapter interface, Zen provider implementation, runtime model selection, guardrails/fail-open, and fixture tests; scope narrowed to Zen-only for this phase.
- [2026-02-23 15:52] [2026-02-23 13:00] Added task-level PRD override for task 108: .taskmaster/docs/prds/task-108_semantic-om-background-layer_prd.md covering semantic Observer/Reflector architecture, Zen-only scope, guardrails, fallback, and test strategy.
- [2026-02-24 05:19] [2026-02-24] Handoff plan: add an Agent Installers TUI section under Settings in aoc-control (Alt+C), parallel to RTK controls, with per-agent click-to-install/update actions.
- [2026-02-24 05:19] Scope: add install UX for codex, gemini, cc, kimi, oc, omo, and pi; keep repo Apache-2.0 by using fetch/install wrappers (no bundling third-party binaries).
- [2026-02-24 05:19] Primary implementation file: crates/aoc-control/src/main.rs. Add new mode(s) similar to Mode::RtkActions, e.g. Mode::AgentInstallActions; add app state list (agent_install_state) and selection wiring in ensure_selections(), handle_key(), handle_key_agent_install_actions(), draw_modal(), footer_lines().
- [2026-02-24 05:19] Settings list update in draw_defaults()/activate_selection(): insert 'Agent installers' item near RTK, increase defaults list len from 5 to 6 in ensure_selections()/list_next()/list_prev(), map selection index to open_agent_install_actions().
- [2026-02-24 05:19] Add helper table in aoc-control (or shared script): agent install metadata per id (label, binary env var, detect command, install command, update command, notes). Render status labels in modal list: installed/missing + detected path/version when possible.
- [2026-02-24 05:19] Command execution pattern: follow existing run_rtk_command()/run_theme_command() style; use Command::new(...).output(); parse stdout/stderr first non-empty line for status; show deterministic errors via command_failure().
- [2026-02-24 05:19] Recommended new wrapper script: bin/aoc-agent-install with subcommands: status <agent>, install <agent>, update <agent>. aoc-control should call this script to keep installer logic out of Rust UI and simplify future edits.
- [2026-02-24 05:19] Installer policy: codex/gemini/cc/kimi/oc/omo can each map to project-approved install commands; pi action must include explicit rider warning/consent gate in script before running upstream fetch command.
- [2026-02-24 05:19] Docs update after implementation: docs/configuration.md (new settings action + env vars), docs/installation.md (agent installer UX), README.md (Alt+C -> Settings -> Agent installers).
- [2026-02-24 05:19] Validation checklist: cargo check -p aoc-control --manifest-path crates/Cargo.toml; bash -n bin/aoc-agent-install (new); bash ./scripts/lint.sh; bash ./scripts/smoke.sh; add/extend smoke to cover aoc-agent-install --help and status path.
- [2026-02-24 05:19] Acceptance criteria: 1) Alt+C Settings includes Agent installers entry, 2) modal lists all supported agents with status, 3) Enter runs install/update action and returns clear status, 4) failure messages are surfaced in footer status line, 5) no binary bundling added to repo/releases.
